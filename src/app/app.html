<div class="app-wrapper">
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"
                fill="#60a5fa"/>
        </svg>
        <h1>WeatherApp</h1>
      </div>

      <div class="header-controls">
        <div class="search-container">
          <form (submit)="submitLocation($event)" class="search-form">
            <input type="text" placeholder="Buscar una ciudad..." required>
          </form>
        </div>

        <button class="unit-toggle" (click)="toggleUnit()">
          {{ isCelsius ? '°C' : '°F' }} / {{ isCelsius ? '°F' : '°C' }}
        </button>
      </div>
    </header>

    <div class="content">
      <!-- Main Weather Section -->
      <div class="main-section">
        <div *ngIf="loading" class="loading">
          <div class="spinner"></div>
          <p>Cargando clima...</p>
        </div>

        <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

        <div *ngIf="weather && !loading" class="weather-main">
          <div class="city-header">
            <h2>{{ weather.name }}, {{ weather.sys.country }}</h2>
            <button class="favorite-btn" (click)="addToFavorites()">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
              </svg>
              Agregar a Favoritos
            </button>
          </div>

          <div class="temp-display">
            <div class="weather-icon-large">
              <img [src]="getWeatherIcon(weather.weather[0].icon)" alt="icono del clima">
            </div>
            <div class="temp-large">
              {{ getTemperature(weather.main.temp) | number: '1.0-0' }}{{ getUnit() }}
            </div>
          </div>


          <!-- 5-Day Forecast -->
          <div class="forecast-section">
            <h3>Pronóstico de 5 Días</h3>
            <div class="forecast-grid">
              <div *ngFor="let day of forecast" class="forecast-day">
                <span class="forecast-day-name">{{ day.day }}</span>
                <img [src]="getWeatherIcon(day.icon)" alt="clima" class="forecast-icon">
                <div class="forecast-temps">
                  <span class="forecast-max">{{ getTemperature(day.maxTemp) | number: '1.0-0' }}°</span>
                  <span class="forecast-min">{{ getTemperature(day.minTemp) | number: '1.0-0' }}°</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sidebar - Favorite Cities -->
      <aside class="sidebar">
        <h3>Ciudades Favoritas</h3>
        <div class="favorite-cities">
          <div *ngFor="let city of favoriteCities" class="favorite-city" (click)="loadFavoriteCity(city)">
            <div class="city-info">
              <h4>{{ city.name }}</h4>
              <p>{{ city.condition | titlecase }}</p>
            </div>
            <div class="city-temp">{{ getTemperature(city.temp) | number: '1.0-0' }}{{ getUnit() }}</div>
          </div>
        </div>
      </aside>
    </div>
  </div>
</div>

<router-outlet/>
